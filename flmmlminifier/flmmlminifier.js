var minifier;!function(e){var n=function(){function e(n){this.name=n,this.times=e.mml.match(new RegExp(this.name,"g")).length,this.sumLen=this.times*this.name.length}return e}();e.Macro=n}(minifier||(minifier={}));var Macro=minifier.Macro,FlMMLMinifier=function(){function e(){}return e.minify=function(n){var r,c,a,f,t,u=[],i=[],o=[],l=[],g=/^#.+\n?/gm,h=/\$([^{;\s\n]*)[^;]*=[^;]*;/g,p=/\{([^\n\}]*)\n/g,m=/\u002f\*\!(\n|[^\u002f]|[^*]\u002f)*\*\u002f\n?/g,s=/\u002f\*\!\[(\n|[^\u002f]|[^*]\u002f)*\]\*\u002f/g,$=[];for(n=n.replace(/\r\n?/g,"\n");t=s.exec(n);)a=t[0].replace(/[\u002f*!\[\]]/g,""),a=a.replace(/\s/g,","),a.split(",").forEach(function(e){e&&!e.match(/[^\w+#\(\)]+/g)&&o.push(e)});for(n=n.replace(s,""),n=n.replace(/.*\u002f\*\!\*\u002f.*\n?$/gm,"");t=m.exec(n);)i.push(t[0]);for(n=n.replace(m,""),n=n.replace(/\u002f\*\u002f?(\n|[^\u002f]|[^*]\u002f)*\*\u002f/g,""),n=n.replace(/[ \t][ \t]+/g," "),n=n.replace(/\n\n+/g,"\n"),n=n.replace(/\n[ \t]/g,"\n"),n=n.replace(/[ \t]\n/g,"\n");t=p.exec(n);)n=n.replace(p,"{$1 ");for(;t=g.exec(n);)u.push(t[0]);for(n=n.replace(g,""),Macro.mml=n;t=h.exec(n);){for(a=t[1],f=!1,r=0,c=o.length;c>r;r++)if(o[r]===a){f=!0;break}f||l.push(new Macro(a))}for(r=0,c=l.length+o.length;c>r;r++)$[r]=e.macroTable[r];return o.forEach(function(e){for(var n=$.length;n--;)if(e===$[n]){$.splice(n,1);break}}),l.sort(function(e,n){return n.sumLen-e.sumLen}),l.forEach(function(e,n){e.tableIdx=n}),l.sort(function(e,n){return n.name.length-e.name.length}),l.forEach(function(e){n=n.replace(new RegExp("\\$"+e.name,"g"),"/**/"+$[e.tableIdx])}),n=n.replace(/\u002f\*\*\u002f/g,"$"),n=n.replace(/[ \t\n]/g,""),n+="\n",u.forEach(function(e){e=e.replace(/[ \t][ \t]+/g," "),e.match(/^#WAV(9|10|13)/)?(e=e.replace(/(#WAV)(9|10|13) /g,"$1$2!"),e=e.replace(/ /g,""),e=e.replace(/\!/g," ")):e.match(/^#OP[NM]/)&&(e=e.replace(/([\{,])[ \t]/g,"$1"),e=e.replace(/[ \t]([\},])/g,"$1")),n+=e}),n=n.replace(/\n$/g,""),i.forEach(function(e){n=e+("\n"===e.charAt(e.length-1)?"":"\n")+n}),n},e.macroTable=function(){var e=[],n=["","_","H","h","J","j","K","k","Y","y","Z","z"];return n.forEach(function(n){var r;for(e.push("_"+n),r=65;90>=r;r++)e.push(String.fromCharCode(r)+n);for(r=97;122>=r;r++)e.push(String.fromCharCode(r)+n)}),e}(),e}();